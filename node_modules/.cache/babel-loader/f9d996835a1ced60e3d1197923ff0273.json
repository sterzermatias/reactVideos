{"ast":null,"code":"var _jsxFileName = \"/home/chichen/Documentos/repo/reactPracticas/video-favourites/src/components/Add.js\";\nimport React, { Component } from \"react\";\nimport { addVideo } from '../api';\nimport PropTypes from 'prop-types';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst parseYoutubeUrl = url => {\n  const match = url.match(/[?&]([^=#]+)=([^&#]*)/);\n  return match && match[2];\n};\n\nclass Add extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false,\n      showSending: false,\n      title: '',\n      url: '',\n      text: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(field) {\n    return event => {\n      this.setState({\n        [field]: event.target.value\n      });\n    };\n  }\n\n  validation(app) {\n    if (app.title.length > 0 && app.url.length > 0 && app.description.length > 2) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const {\n      onClose\n    } = this.props;\n    const token = parseYoutubeUrl(this.state.url || '');\n\n    if (this.validation(this.state) && token) {\n      this.setState({\n        showSending: true\n      });\n      addVideo({\n        title: this.state.title,\n        description: this.state.description,\n        url: this.state.url,\n        thumbnail: `https://img.youtube.com/vi/${token}/maxresdefault.jpg`,\n        embed: `https://www.youtube.com/embed/${token}`\n      }).then(onClose(true));\n    } else {\n      this.setState({\n        hasError: true\n      });\n    }\n  }\n\n  render() {\n    const {\n      showSending,\n      title,\n      url,\n      description,\n      hasError\n    } = this.state;\n    const {\n      onClose\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"close\",\n          onClick: onClose(false),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \" Crear nuevo V\\xEDdeo \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }, this), showSending && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"success\",\n          children: \" Enviando .... \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 35\n        }, this), hasError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"error\",\n          children: \" Some fields are empty or contain an wrong values. \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 32\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"T\\xEDtulo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 22\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: title,\n            onChange: this.handleChange(\"title\"),\n            minLength: \"3\",\n            maxLength: \"200\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 22\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Url\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: url,\n            onChange: this.handleChange(\"url\"),\n            minLength: \"3\",\n            maxLength: \"200\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Descripci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: description,\n            onChange: this.handleChange(\"description\"),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\",\n            onClick: this.handleSubmit,\n            value: \"Submit\",\n            disabled: showSending\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }, this);\n  }\n\n}\n\nexport default Add;","map":{"version":3,"sources":["/home/chichen/Documentos/repo/reactPracticas/video-favourites/src/components/Add.js"],"names":["React","Component","addVideo","PropTypes","parseYoutubeUrl","url","match","Add","constructor","props","state","hasError","showSending","title","text","handleChange","bind","handleSubmit","field","event","setState","target","value","validation","app","length","description","e","preventDefault","onClose","token","thumbnail","embed","then","render"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport { addVideo } from '../api';\nimport PropTypes from 'prop-types';\n\nconst parseYoutubeUrl = (url) => {\n    const match = url.match(/[?&]([^=#]+)=([^&#]*)/);\n    return match && match[2];\n};\n\nclass Add extends Component {\n    constructor (props) {\n        super(props);\n        this.state = {\n            hasError: false,\n            showSending: false,\n            title:'',\n            url: '',\n            text:''\n        }\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n    handleChange (field) {\n        return (event) => {\n            this.setState({\n                [field]: event.target.value\n            })    \n        }\n    }\n\n    validation(app){\n        if(app.title.length > 0 &&  app.url.length > 0 && app.description.length > 2){\n            return true;\n        } else {\n            return false;\n        }\n    }\n    handleSubmit(e){\n        e.preventDefault();\n        const { onClose } = this.props;\n        const token = parseYoutubeUrl(this.state.url || '');\n        if(this.validation(this.state) && token){\n            this.setState({showSending:true})\n            addVideo({\n                title: this.state.title,\n                description: this.state.description,\n                url: this.state.url,\n                thumbnail: `https://img.youtube.com/vi/${token}/maxresdefault.jpg`,\n                embed: `https://www.youtube.com/embed/${token}`\n            }).then(onClose(true));\n        }else{\n            this.setState({\n                hasError:true\n            });\n        }\n    }\n\n    render() {\n        const { showSending, title, url, description, hasError} = this.state;\n        const {onClose} = this.props;\n        return (<div className=\"modal\">\n              <div className=\"modal-content\">\n                <span className=\"close\" onClick={onClose(false)}>&times;</span>\n                <h2> Crear nuevo Vídeo </h2>\n                { showSending && (<span className=\"success\"> Enviando .... </span> )}\n                { hasError && (<div className=\"error\"> Some fields are empty or contain an wrong values. </div>) }\n                <form>\n                     <label>Título</label> \n                     <input type=\"text\" value={title} onChange={this.handleChange(\"title\")} minLength=\"3\" maxLength=\"200\"  required/> \n                    <label>Url</label>\n                    <input type=\"text\" value={url} onChange={this.handleChange(\"url\")} minLength=\"3\" maxLength=\"200\"  required/>\n                    <label>Descripción</label>\n                    <textarea value={description} onChange={this.handleChange(\"description\")} required/>\n                    <input type=\"submit\" onClick={this.handleSubmit} value=\"Submit\" disabled={showSending}/>\n                </form>\n              </div>\n            </div>);\n    }\n}\n\nexport default Add;\n"]},"metadata":{},"sourceType":"module"}